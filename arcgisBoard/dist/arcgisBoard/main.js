arcgisBoard(function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s=35)}([function(e,t){e.exports=React},function(e,t,n){"use strict";var r=n(4),a=n(17),i=Object.prototype.toString;function s(e){return"[object Array]"===i.call(e)}function o(e){return null!==e&&"object"==typeof e}function u(e){return"[object Function]"===i.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),s(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:a,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:o,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:u,isStream:function(e){return o(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,a=arguments.length;r<a;r++)c(arguments[r],n);return t},extend:function(e,t,n){return c(t,(function(t,a){e[a]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t){e.exports="custom/arcgisBoard/assets/img/pin.dd6e889d.png"},function(e,t,n){"use strict";(function(t){var r=n(1),a=n(20),i={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o,u={adapter:("undefined"!=typeof XMLHttpRequest?o=n(5):void 0!==t&&(o=n(5)),o),transformRequest:[function(e,t){return a(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){u.headers[e]=r.merge(i)})),e.exports=u}).call(this,n(19))},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(1),a=n(21),i=n(23),s=n(24),o=n(25),u=n(6);e.exports=function(e){return new Promise((function(t,c){var l=e.data,d=e.headers;r.isFormData(l)&&delete d["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var f=e.auth.username||"",h=e.auth.password||"";d.Authorization="Basic "+btoa(f+":"+h)}if(p.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in p?s(p.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:n,config:e,request:p};a(t,c,r),p=null}},p.onerror=function(){c(u("Network Error",e,null,p)),p=null},p.ontimeout=function(){c(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var m=n(26),g=(e.withCredentials||o(e.url))&&e.xsrfCookieName?m.read(e.xsrfCookieName):void 0;g&&(d[e.xsrfHeaderName]=g)}if("setRequestHeader"in p&&r.forEach(d,(function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete d[t]:p.setRequestHeader(t,e)})),e.withCredentials&&(p.withCredentials=!0),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),c(e),p=null)})),void 0===l&&(l=null),p.send(l)}))}},function(e,t,n){"use strict";var r=n(22);e.exports=function(e,t,n,a,i){var s=new Error(e);return r(s,t,n,a,i)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){e.exports=n(16)},function(e,t){e.exports="custom/arcgisBoard/assets/img/redPin.218398e5.png"},function(e,t){e.exports="custom/arcgisBoard/assets/img/orangePin.1c3e46fa.png"},function(e,t){e.exports="custom/arcgisBoard/assets/img/yellowPin.0b903f31.png"},function(e,t){e.exports="custom/arcgisBoard/assets/img/greenPin.dd72dc54.png"},function(e,t){e.exports="custom/arcgisBoard/assets/img/cam.199d39c7.svg"},function(e,t,n){!function(e){"use strict";function t(e){if("next"===e.toLowerCase())return"next";var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function n(e){return void 0===e&&(e="4.14"),"https://js.arcgis.com/"+e+"/"}function r(e){return!e||t(e)?function(e){void 0===e&&(e="4.14");var r=n(e),a=t(e);return"next"!==a&&3===a.major?r+(a.minor<=10?"js/":"")+"esri/css/esri.css":r+"esri/themes/light/main.css"}(e):e}function a(e,t){var n=r(e),a=function(e){return document.querySelector('link[href*="'+e+'"]')}(n);return a||function(e,t){if(t){var n=document.querySelector(t);n.parentNode.insertBefore(e,n)}else document.head.appendChild(e)}(a=function(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}(n),t),a}var i={Promise:"undefined"!=typeof window?window.Promise:void 0},s={};function o(e,t,n){var r;n&&(r=function(e,t){var n=function(r){t(r.error||new Error("There was an error attempting to load "+e.src)),e.removeEventListener("error",n,!1)};return e.addEventListener("error",n,!1),n}(e,n));var a=function(){t(e),e.removeEventListener("load",a,!1),r&&e.removeEventListener("error",r,!1)};e.addEventListener("load",a,!1)}function u(e){void 0===e&&(e={}),s=e}function c(){return document.querySelector("script[data-esri-loader]")}function l(){var e=window.require;return e&&e.on}function d(e){void 0===e&&(e={});var t={};[s,e].forEach((function(e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}));var r=t.version,u=t.url||n(r);return new i.Promise((function(e,n){var i=c();if(i){var s=i.getAttribute("src");s!==u?n(new Error("The ArcGIS API for JavaScript is already loaded ("+s+").")):l()?e(i):o(i,e,n)}else if(l())n(new Error("The ArcGIS API for JavaScript is already loaded."));else{var d=t.css;d&&a(!0===d?r:d,t.insertCssBefore),t.dojoConfig&&(window.dojoConfig=t.dojoConfig),o(i=function(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}(u),(function(){i.setAttribute("data-esri-loader","loaded"),e(i)}),n),document.body.appendChild(i)}}))}function p(e){return new i.Promise((function(t,n){var r=window.require.on("error",n);window.require(e,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r.remove(),t(e)}))}))}function f(e,t){if(void 0===t&&(t={}),l())return p(e);var n=c(),r=n&&n.getAttribute("src");return!t.url&&r&&(t.url=r),d(t).then((function(){return p(e)}))}var h={getScript:c,isLoaded:l,loadModules:f,loadScript:d,loadCss:a,setDefaultOptions:u,utils:i};e.getScript=c,e.isLoaded=l,e.loadModules=f,e.loadScript=d,e.loadCss=a,e.setDefaultOptions=u,e.utils=i,e.default=h,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";var r=n(1),a=n(4),i=n(18),s=n(3);function o(e){var t=new i(e),n=a(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var u=o(s);u.Axios=i,u.create=function(e){return o(r.merge(s,e))},u.Cancel=n(8),u.CancelToken=n(32),u.isCancel=n(7),u.all=function(e){return Promise.all(e)},u.spread=n(33),e.exports=u,e.exports.default=u},function(e,t){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},function(e,t,n){"use strict";var r=n(3),a=n(1),i=n(27),s=n(28);function o(e){this.defaults=e,this.interceptors={request:new i,response:new i}}o.prototype.request=function(e){"string"==typeof e&&(e=a.merge({url:arguments[0]},arguments[1])),(e=a.merge(r,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},a.forEach(["delete","get","head","options"],(function(e){o.prototype[e]=function(t,n){return this.request(a.merge(n||{},{method:e,url:t}))}})),a.forEach(["post","put","patch"],(function(e){o.prototype[e]=function(t,n,r){return this.request(a.merge(r||{},{method:e,url:t,data:n}))}})),e.exports=o},function(e,t){var n,r,a=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,c=[],l=!1,d=-1;function p(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&f())}function f(){if(!l){var e=o(p);l=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||o(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(1);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t,n){var a=n.config.validateStatus;n.status&&a&&!a(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,a){return e.config=t,n&&(e.code=n),e.request=r,e.response=a,e}},function(e,t,n){"use strict";var r=n(1);function a(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(a(t)+"="+a(e))})))})),i=s.join("&")}return i&&(e+=(-1===e.indexOf("?")?"?":"&")+i),e}},function(e,t,n){"use strict";var r=n(1),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,s={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(s[t]&&a.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},function(e,t,n){"use strict";var r=n(1);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function a(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=a(window.location.href),function(t){var n=r.isString(t)?a(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(1);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,a,i,s){var o=[];o.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),r.isString(a)&&o.push("path="+a),r.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(1);function a(){this.handlers=[]}a.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=a},function(e,t,n){"use strict";var r=n(1),a=n(29),i=n(7),s=n(3),o=n(30),u=n(31);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return c(e),e.baseURL&&!o(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=a(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return c(e),t.data=a(t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(c(e),t&&t.response&&(t.response.data=a(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(1);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(8);function a(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.source=function(){var e;return{token:new a((function(t){e=t})),cancel:e}},e.exports=a},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(9),s=n.n(i);!function(e,t){let n=document.getElementById("txtToken");n||(n=document.createElement("input"),n.id="txtToken",n.style.display="none",document.body.append(n)),e.getToken=function(){s.a.get("http://map.cn.gov/RemoteTokenServer?request=getToken&username=cnkwkf&password=cnkwkf12345&clientid=ref.http://bigdata.cn.gov:8070/&expiration=500").then(e=>{document.getElementById("txtToken").value=e.data,console.log(e)})};const r="http://bigdata.cn.gov:8080",a="http://10.207.184.66:8090";e.conf={token_HESHENG:"",hesheng:{loginUrl:`${r}/visdata/rest/auth/login`,mobileAlarm:`${r}/visdata/rest/pagemanage/dataconvert/query?definedStr=${encodeURIComponent("@mobile_group://$.*;")}`,unicomAlarm:`${r}/visdata/rest/pagemanage/dataconvert/query?definedStr=${encodeURIComponent("@unicom_group://$.*;")}`,ocnAlarm:`${r}/visdata/rest/pagemanage/dataconvert/query?definedStr=${encodeURIComponent("@ocn_alarm_group://$.*;")}`,telecomAlarm:`${r}/visdata/rest/pagemanage/dataconvert/query?definedStr=${encodeURIComponent("@chinatelecom_alarm_group://1:1-n:n;")}`,telecomAlarmHealth:`${r}/visdata/rest/pagemanage/dataset/chinatelecom_health_group/esresult`,telecomHealth:`${r}/visdata/rest/pagemanage/dataconvert/query?definedStr=${encodeURIComponent("@chinatelecom_health_group://1:1-n:n;")}`,telecomAllDevice:`${r}/visdata/rest/pagemanage/dataconvert/query?definedStr=${encodeURIComponent("@chinatelecom_all_device_group://1:1-n:n;")}`,telecomAlarmDevice:`${r}/visdata/rest/sign/signservice/alarm?id=chinatelecom_alarm_group&type=3`,telecomAllDevice_XY:`${r}/visdata/rest/pagemanage/dataset/changningdianxingAll/result`,telecomDeviceSum:`${r}/visdata/rest/pagemanage/dataset/dianxingcount/result`,deviceTypeSum:`${r}/visdata/rest/pagemanage/dataset/changningdianxingtype/result`,alarmSum:`${r}/visdata/rest/sign/signservice/count`,alarmYesSum:`${r}/visdata/rest//dataset/changingyesterdaysum/result`,Alarm30Sum:`${r}/visdata/rest//dataset/changningsum/result`,Alarm30StreetSum:`${r}/visdata/rest/pagemanage/dataset/changningaddresssum/result`,signUrl:`${r}/visdata/rest/sign/signservice/getsign`,appkey:"hesheng",username:"dituapi@dituapi.com",captchaSwitch:!1,password:"dituapi",captchaSwitch:!1},ocn:{baseUrl:`${r}/visdata/rest/pagemanage/dataset/ocn_device_group/esresult`,performUrl:`${r}/visdata/rest/pagemanage/dataset/ocn_keepalive_group/esresult`,allDeviceUrl:`${r}/visdata/rest/pagemanage/dataset/ocn_all_device_group/esresult`,allDeviceUrl_XY:`${r}/visdata/rest/pagemanage/dataset/ocn_all_device_without_param_group/result`,deviceSum:`${r}/visdata/rest/pagemanage/dataset/youxiancount/result`,deviceTypeSum:`${r}/visdata/rest/pagemanage/dataset/changningyouxiantype/result`,offLineList:`${r}/visdata/rest/pagemanage/dataset/changningdianxingoff/result`,offLineSum:`${r}/visdata/rest/pagemanage/dataset/changningyouxianoffcount /result`,offLineDeviceType:`${r}/visdata/rest/pagemanage/dataset/changningyouxianofftype/result`,alarmDevice:`${r}/visdata/rest/sign/signservice/alarm?id=ocn_alarm_group&type=4`},mobile:{baseUrl:`${a}/dataAEx-N/device/getDeviceBaseInfo`,detailUrl:`${a}/dataAEx-N/device/getDeviceDetailInfo`,performUrl:`${a}/dataAEx-N/device/getDevicePerformInfo`,allDevice:`${a}/dataAEx-N/device/getDevicePerformInfoAll`,allDevice_XY:`${r}/visdata/rest/pagemanage/dataset/changningyidongAll/result`,deviceSum:`${r}/visdata/rest/pagemanage/dataset/yidongcount/result`,deviceTypeSum:`${r}/visdata/rest/pagemanage/dataset/changningyidongtype/result`,offLineList:`${r}/visdata/rest/pagemanage/dataset/changningyidongoff/result`,offLineSum:`${r}/visdata/rest/pagemanage/dataset/changningyidongoffcount/result`,offLineDeviceType:`${r}/visdata/rest/pagemanage/dataset/changningyidongofftype/result`,alarmDevice:`${r}/visdata/rest/sign/signservice/alarm?id=mobile_group&type=2`},unicom:{subscribeCode:"0RSTDE1544769008706",loginUrl:`${r}/visdata/rest/sign/signservice/auth`,deviceUrl:`${r}/visdata/rest/sign/signservice/device`,deviceHealth:`${r}/visdata/rest/pagemanage/dataset/unicom_health_group/esresult`,allDevice_XY:`${r}/visdata/rest/pagemanage/dataset/changningliantongall/result`,deviceSum:`${r}/visdata/rest/pagemanage/dataset/liantongcount/result`,deviceTypeSum:`${r}/visdata/rest/pagemanage/dataset/changningliantongtype/result`,alarmDevice:`${r}/visdata/rest/sign/signservice/alarm?id=unicom_group&type=1`},wlw:{leftTimer:3e5,alarmTimer:3e4},HB:{L_count:`${r}/visdata/rest/pagemanage/dataset/cj_lishijianzhu_count/result`,L_bar:`${r}/visdata/rest/pagemanage/dataset/cj_lishijianzhu_construction_age_count/result`,L_pie:`${r}/visdata/rest/pagemanage/dataset/cj_lishijianzhu_cultural_relic_class_count/result`,R_count:`${r}/visdata/rest/pagemanage/dataset/cj_lishijianzhu_xuncha_count/result`,R_events:`${r}/visdata/rest/pagemanage/dataset/cj_lishijianzhu_xuncha_events/result`,R_type:`${r}/visdata/rest/pagemanage/dataset/cj_lishijianzhu_xuncha_event_type_count/result`,R_month:`${r}/visdata/rest/pagemanage/dataset/cj_lishijianzhu_xuncha_event_month_count/result`},ROAD:{L_count1:`${r}/visdata/rest/pagemanage/dataset/cj_luzhen_juezhanlu_count/result`,L_count2:`${r}/visdata/rest/pagemanage/dataset/cj_luzhen_gongdi_count/result`,L_pie:`${r}/visdata/rest/pagemanage/dataset/cj_luzhen_gongchengleixing/result`,L_juluBar:`${r}/visdata/rest/pagemanage/dataset/cj_luzhen_jungongriqi_juelu/result`,L_zhanluBar:`${r}/visdata/rest/pagemanage/dataset/cj_luzhen_jungongriqi_zhanlu/result`,R_TOP1:`${r}/visdata/rest/pagemanage/dataset/cj_luzhen_jinri_yingxiangdaolu/result`,R_TOP2:`${r}/visdata/rest/pagemanage/dataset/cj_luzhen_zuoriri_yingxiangdaolu/result`,R_bar:`${r}/visdata/rest/pagemanage/dataset/cj_gongdi_tousuleixing_month/result`,R_pie:`${r}/visdata/rest/pagemanage/dataset/cj_gongdi_gongdileixing_month/result`},RIVE:{L_count:`${r}/visdata/rest/pagemanage/dataset/cj_hedao_hedao_count/result`,L_gongdi:`${r}/visdata/rest/pagemanage/dataset/cj_hedao_xuncha_count/result`,L_pie:`${r}/visdata/rest/pagemanage/dataset/cj_hedao_xuncha_events/result`,R_count:`${r}/visdata/rest/pagemanage/dataset/cj_hedao_xuncha_event_type/result`,R_events:`${r}/visdata/rest/pagemanage/dataset/cj_hedao_xuncha_qushi_month/result`,R_type:`${r}/visdata/rest/pagemanage/dataset/cj_hedao_xuncha_qushi_year/result`}}}(window,document);var o=n(10),u=n.n(o),c=n(11),l=n.n(c),d=n(12),p=n.n(d),f=n(13),h=n.n(f),m=n(14),g=n.n(m),v=(n(34),n(15)),y=n.n(v),x=n(2),_=n.n(x);function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class b extends r.Component{constructor(e){super(e),this.popup=this.props.popup,this.spatialReferencevalue='PROJCS["shanghaicity",GEOGCS["GCS_Beijing_1954",DATUM["D_Beijing_1954",SPHEROID["Krasovsky_1940",6378245.0,298.3]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",-3457147.81],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",121.2751921],PARAMETER["Scale_Factor",1.0],PARAMETER["Latitude_Of_Origin",0.0],UNIT["Meter",1.0]]',this.url="http://bigdata.cn.gov:9070/arcgis_js_v410_sdk/arcgis_js_api/library/4.10/dojo/dojo.js",this.ArcGisGraphic=null,this.gridRatio=100,this.view=null,this.cameraModifyed=!1,this.state={mapReady:!1},this.pointsObj=[]}cluster(e,t=!0){if(console.log("clusting",t,"ready",this.state.mapReady),!this.state.mapReady||!e)return;let n=(e,t)=>{var n=[{type:"picture-marker",url:_.a,width:"18px",height:"20px"},{type:"picture-marker",url:_.a,width:"24px",height:"27px"},{type:"picture-marker",url:_.a,width:"30px",height:"35px"}];n=n.map(e=>({...e,url:t||e.url,height:e.markSize?e.width*e.markSize:e.height}));var r=[];return e.forEach(e=>{var t;if(e.clusterCount<=0)return;t=e.clusterCount<5?n[0]:e.clusterCount<50?n[1]:n[2];let a=new this.ArcGisGraphic({attributes:{...e.attributes,count:e.clusterCount},geometry:{type:"point",x:e.x,y:e.y,spatialReference:this.spatialReferencevalue},symbol:t});r.push(a)}),console.log(r,"points"),this.view.graphics.addMany(r),r},r=(e,t)=>{var n=this.view.extent;return t.forEach((t,r)=>{if(!(t.x<=n.xmin||t.x>n.xmax||t.y<=n.ymin||t.y>n.ymax))for(var a=t.x,i=t.y,s=0,o=e.length;s<o;s++){var u=e[s];if(!(t.x<=u.extent.xmin||t.x>u.extent.xmax||t.y<=u.extent.ymin||t.y>u.extent.ymax)){u.x=u.clusterCount>0?(a+u.x*u.clusterCount)/(u.clusterCount+1):a,u.y=u.clusterCount>0?(i+u.y*u.clusterCount)/(u.clusterCount+1):i,u.attributes=t,u.points.push([a,i,t]),u.clusterCount++;break}}}),e},a=()=>{for(var e,t,n,r=Math.round(this.view.width/this.gridRatio),a=Math.round(this.view.height/this.gridRatio),i=(this.view.extent.xmax-this.view.extent.xmin)/r,s=(this.view.extent.ymax-this.view.extent.ymin)/a,o=[],u=0;u<r;u++){t=(e=this.view.extent.xmin+i*u)+i;for(var c=0;c<a;c++){var l={xmin:e,xmax:t,ymin:n=this.view.extent.ymin+s*c,ymax:n+s};o.push({extent:l,clusterCount:0,subTypeCounts:[],singles:[],points:[],x:0,y:0})}}return o},i=e=>e.filter(e=>e.x>=this.view.extent.xmin&&e.x<this.view.extent.xmax&&e.y>=this.view.extent.ymin&&e.y<this.view.extent.ymax);console.log(e),this.view.graphics.removeMany(this.pointsObj),this.pointsObj=[];for(let s=0;s<e.length;s++)if(!e[s].hide){let o,u=e[s];o=t?r(a(),u.points):i(u.points),this.pointsObj=this.pointsObj.concat(n(o,u.marks))}}componentDidUpdate(){if(this.cluster(this.props.datas),this.props.camerainfo&&this.view){let{camerainfo:e}=this.props;console.log(e),this.view.center=new this.ArcGisPoint(e.center),this.view.zoom=e.zoom}}componentDidMount(){console.log("didmount",this.view),window.getToken(),y.a.loadModules(["esri/config","esri/views/MapView","esri/Map","esri/core/watchUtils","esri/symbols/TextSymbol","esri/geometry/Circle","esri/identity/IdentityManager","esri/geometry/SpatialReference","esri/layers/FeatureLayer","esri/layers/TileLayer","esri/layers/MapImageLayer","esri/geometry/Extent","esri/geometry/Point","esri/symbols/SimpleMarkerSymbol","esri/symbols/PictureMarkerSymbol","esri/Graphic","esri/PopupTemplate","esri/renderers/ClassBreaksRenderer","esri/layers/GraphicsLayer","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/Color","esri/renderers/SimpleRenderer","esri/views/2d/draw/Draw","dojo","esri/geometry/geometryEngine"],{url:this.url}).then(([e,t,n,r,a,i,s,o,u,c,l,d,p,f,h,m,g,v,y,x,_,w,b,S,T,E])=>{this.ArcGisGraphic=m,this.ArcGisPoint=p;let j=this.spatialReferencevalue;e.fontsUrl="http://bigdata.cn.gov:9070/arcgisapi-master/fonts/arial-unicode-ms",this.map=new n({}),this.view=new t({container:"mapDiv",map:this.map,showLabels:!0,center:[121.41802145766225,31.21819924364435],extent:new d({type:"extent",xmax:2116.0772399670277,xmin:-18203.963400114255,ymax:-16.55708170044818,ymin:-5731.568511723309,spatialReference:{wkt:j}}),sliderPosition:"bottom-right",sliderOrientation:"horizontal",zoom:4}),this.map.on("zoom-end",(function(){alert(this.map.getZoom())}));var R=document.getElementById("txtToken").value;s.registerToken({server:"http://map.cn.gov/OneMapServer/rest/services",token:R});var A=new c({url:"http://map.cn.gov/OneMapServer/rest/services/DARK_MAP2/MapServer",id:"baseMap"});const $={symbol:{type:"text",color:"green",haloColor:"black",font:{size:12,family:"microsoft-yahei",weight:"normal"}}};var C=new u({url:"http://map.cn.gov/OneMapServer/rest/services/ROAD_FCLASS/FeatureServer/0",renderer:{type:"simple",symbol:{type:"simple-line",width:8,color:[45,155,163,.6]}},id:"states",outFields:["*"],labelingInfo:[$],mode:u.MARKER_ACTIVITY});var O=new u({url:"http://map.cn.gov/OneMapServer/rest/services/JTSS_FCLASS/FeatureServer/3",renderer:{type:"simple",symbol:{type:"simple-line",width:2,color:[41,182,246,.4]}},outFields:["*"],labelingInfo:[$]});var L=new u({url:"http://map.cn.gov/OneMapServer/rest/services/BOUNDARY/FeatureServer/0",renderer:{type:"simple",symbol:{type:"simple-line",width:2,color:[237,231,246,1],style:"dash"}},minScale:0,maxScale:0,title:"区界"});this.map.add(A),this.map.add(C),this.map.add(O),this.map.add(L),this.view.ui.components=[],console.log("DID INITED"),this.view.when(()=>{this.cluster(this.props.datas),["drag","mouse-wheel","double-click"].forEach(e=>{this.view.on(e,e=>{this.cameraModifyed=!0})}),r.whenTrue(this.view,"stationary",()=>{this.cameraModifyed&&(this.cameraModifyed=!1,9===this.view.zoom?this.cluster(this.props.data,!1):this.cluster(this.props.datas,!0))}),this.view.popup.autoOpenEnabled=!1,this.view.on("click",e=>{this.view.hitTest(e).then(e=>{console.log(e);let t=e.results[0].graphic.attributes;if("上海虹桥国际机场"===t.NAME||null===t||"外环高速公路"===t.name||"北新泾-青浦公路"===t.name||"上海-聂拉木公路"===t.name||"虹中路"===t.name||"金沙江西路"===t.name||"轨道交通"===t.BUSTYPE||1===t.objectid)return!1;e.results.length>0&&(window.postMessage(this.popup(t)),console.log("POSTED"))})}),this.view.ui.components=[],this.setState({mapReady:!0})})})}render(){return a.a.createElement("div",w({id:"mapDiv"},this.props))}}const S=[{filter:e=>e.type.indexOf("消防")>=0&&e.name.indexOf("长宁")>=0,pinType:"changning",marks:u.a},{filter:e=>e.type.indexOf("消防")>=0&&e.name.indexOf("附近")>=0,pinType:"fujin",marks:l.a},{filter:e=>e.type.indexOf("消防")>=0&&e.name.indexOf("企业")>=0,pinType:"qiye",marks:h.a},{filter:e=>e.type.indexOf("消防")>=0&&e.name.indexOf("社区")>=0,pinType:"shequ",marks:p.a},{filter:e=>e.type.indexOf("视频")>=0,pinType:"shipin",marks:g.a,markSize:1}],T=e=>{let t={data:{sbbh:e.sbbh,name:e.name,type:e.type,address:e.address,pinType:e.pinType,state:e.state,X:e.X,Y:e.Y},type:"PICKPOINT",flag:"GRIDFLAG"};return console.log("BEFORE POST",t),t};class E extends r.Component{constructor(e){super(e),this.state={flag:S.map(()=>!1)},this.updateFlag=!0,this.map=null,this.token=null,this.addClusters=null,window.addEventListener("message",e=>{if(e.data.flag&&"GRIDFLAG"===e.data.flag&&console.log("frame get message",e),("http://bigdata.cn.gov:8070"===e.origin||"http://bigdata.cn.gov:8060"===e.origin||"http://localhost:7000"===e.origin||"http://localhost:8000"===e.origin)&&"SHOWNSTATE"===e.data.type&&"GRIDFLAG"===e.data.flag){let{pinType:t,data:n}=e.data,r=S.findIndex(e=>e.pinType===t);if(r>=0){let{flag:e}=this.state;e[r]=n||!e[r],this.setState({flag:e}),this.updateFlag=!0,console.log(this.state.flag)}}},!1)}componentDidMount(){}componentDidUpdate(){}shouldComponentUpdate(e){return this.props.data!==e.data||this.updateFlag}getData(e){if(!e)return;let t=e.slice(1).map(e=>({...e,x:+e.X,y:+e.Y})),n=[];S.forEach((e,t)=>this.state.flag[t]&&n.push(e));let r=n.map(e=>({...e,points:t.filter(e.filter).map(t=>({...e,...t}))}));return console.log(r),r}render(){this.update=!1;const e={overflow:"hidden",position:"absolute",left:"0px",width:"3840px",height:"1080px",zIndex:"0"};return a.a.createElement("div",{className:"road",style:e},a.a.createElement(b,{datas:this.getData(this.props.data),popup:T,style:e}))}}class j extends r.Component{constructor(e){super(e),this.state={loading:!0,popupInfo:null},this.frame=null}componentDidMount(){}componentDidUpdate(){}render(){let{data:e}=this.props;return console.log(e),a.a.createElement(E,{data:e})}}const R=[{type:"视频点位",sbbh:"31010511001321053016",name:"番禺路209弄2HG",state:"番禺路209弄2",address:"番禺路209弄2",lng:"121.42461210000000000000",lant:"31.20858144000000000000",X:"-4493.978069089208",Y:"-2771.0449905520627"},{type:"视频点位",sbbh:"31010511001321053020",name:"新华路派出所HG",state:"新华路派出所",address:"新华路派出所",lng:"121.42155290000000000000",lant:"31.20671357000000000000",X:"-4789.109458834911",Y:"-2979.318477577132"},{type:"视频点位",sbbh:"31010512001321052013",name:"江苏路2号线轻轨出口1HG",state:"江苏路2号线轻轨出口1",address:"江苏路2号线轻轨出口1",lng:"121.42672058640000000000",lant:"31.22164188550000000000",X:"-4296.273444610386",Y:"-1326.4728702815207"},{type:"视频点位",sbbh:"31010513001321052099",name:"定西路硅酸盐研究所1HG",state:"定西路硅酸盐研究所1",address:"定西路硅酸盐研究所1",lng:"121.41749484520000000000",lant:"31.21831431200000000000",X:"-5173.849387145319",Y:"-1693.306876656609"},{type:"视频点位",sbbh:"31010513001321053009",name:"上海书城(长宁路)3HG",state:"上海书城(长宁路)3",address:"上海书城(长宁路)3",lng:"121.41196415440000000000",lant:"31.21971027020000000000",X:"-5702.44916828613",Y:"-1541.3744786987525"},{X:"-4596.09563573754",Y:"-2611.4374911187533",address:"定西路999号",lant:"31.210046",lng:"121.423556",name:"长宁消防站",sbbh:"",state:"延安站",type:"消防站"},{type:"视频点位",sbbh:"31010521001321050010",name:"万都3H",state:"万都3",address:"万都3",lng:"121.40088910860000000000",lant:"31.20666049770000000000",X:"-6755.6155330201655",Y:"-2986.371199333458"},{type:"视频点位",sbbh:"31010515001321052013",name:"天山路700弄H",state:"天山路700弄H",address:"天山路700弄",lng:"121.39527913470000000000",lant:"31.21360517300000000000",X:"-7293.219276680322",Y:"-2216.1986267709353"},{type:"视频点位",sbbh:"31010512001321051073",name:"愚园/安西1HG",state:"愚园/安西1",address:"愚园/安西1",lng:"121.42089474910000000000",lant:"31.22081161380000000000",X:"-4848.496799197909",Y:"-1416.31834063048"}];class A extends r.Component{render(){const{dataProvider:e}=this.props;return console.log(this.props),a.a.createElement("div",{style:{width:"100%",height:"100%"}},a.a.createElement("link",{rel:"stylesheet",href:"http://bigdata.cn.gov:9070/arcgis_js_v410_sdk/arcgis_js_api/library/4.10/esri/css/main.css"}),a.a.createElement("link",{rel:"stylesheet",href:"http://bigdata.cn.gov:9070/arcgis_js_v410_sdk/arcgis_js_api/library/4.10/esri/css/view.css"}),a.a.createElement(j,{data:e||R}))}}t.default=A}]));